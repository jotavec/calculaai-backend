# ================== APP ==================
NODE_ENV=production
# Em Render/Heroku a plataforma define PORT. Mantém 3000 como fallback local.
PORT=3000

# ================== BANCO DE DADOS (Neon / Postgres - PRODUÇÃO) ==================
# Use o POOLER da instância de PRODUÇÃO (NÃO o de dev).
DATABASE_URL="postgresql://SEU_USUARIO_PROD:SEU_PASSWORD_PROD@SEU-ENDPOINT-POOLER.neon.tech/SEU_DB_PROD?sslmode=require"

# (Opcional) Para migrations diretas sem pooler (apenas em CI controlado):
# DIRECT_URL="postgresql://SEU_USUARIO_PROD:SEU_PASSWORD_PROD@SEU-ENDPOINT-PRIMARY.neon.tech/SEU_DB_PROD?sslmode=require"

# ================== SEGURANÇA / JWT ==================
# Gere um segredo forte (>= 32 chars). Ex.: openssl rand -base64 48
JWT_SECRET="SEU_JWT_SECRET_MUITO_FORTE_AQUI"

# ================== CORS / FRONT-END PERMITIDO (PRODUÇÃO) ==================
# Coloca a URL REAL do front publicado (ex.: https://app.calculaai.com.br)
FRONTEND_ORIGIN="https://app.calculaai.com.br"
FRONTEND_URL="https://app.calculaai.com.br"

# ================== COOKIES (PRODUÇÃO) ==================
# Para cookies cross-site entre domínios/subdomínios diferentes:
COOKIE_DOMAIN=".calculaai.com.br"
COOKIE_SECURE="true"      # em produção PRECISA ser true (https)
COOKIE_SAMESITE="None"    # para permitir envio cross-site (ex.: Vercel + Render)

# ================== EMAIL (SMTP PRODUÇÃO) ==================
# Recomendo provedor transacional (Amazon SES, Resend, Mailgun, etc).
SMTP_HOST="email-smtp.us-east-1.amazonaws.com"
SMTP_PORT=587
SMTP_USER="SEU_USUARIO_SMTP_PROD"
SMTP_PASS="SEU_APP_PASSWORD_PROD"
MAIL_FROM="CalculaAI <no-reply@calculaai.com.br>"
SUGESTOES_TO="suporte@calculaai.com.br"

# ================== MERCADO PAGO (PRODUÇÃO) ==================
# Use as CHAVES DE PRODUÇÃO (não sandbox).
MERCADOPAGO_PUBLIC_KEY="PROD-SEU_PUBLIC_KEY"
MERCADOPAGO_ACCESS_TOKEN="APP_USR-SEU_ACCESS_TOKEN_PROD"
# URL de retorno DE PRODUÇÃO (rota real do teu front)
MP_RETURN_URL="https://app.calculaai.com.br/pagamento/retorno"

# ================== ARMAZENAMENTO (Cloudflare R2 - PRODUÇÃO) ==================
# Usa o endpoint da tua conta e bucket de PRODUÇÃO
R2_ENDPOINT="https://SEU_ACCOUNT_ID.r2.cloudflarestorage.com"
R2_BUCKET="calculaai-uploads"
R2_ACCESS_KEY_ID="SEU_R2_ACCESS_KEY_ID_PROD"
R2_SECRET_ACCESS_KEY="SEU_R2_SECRET_ACCESS_KEY_PROD"
# SEM barra no final (o código já trata barra, mas padroniza sem)
R2_PUBLIC_URL_PREFIX="https://pub-SEU_ACCOUNT_ID.r2.dev/calculaai-uploads"

# ===== Aliases S3 (compatibilidade com @aws-sdk/client-s3) =====
S3_ENDPOINT="${R2_ENDPOINT}"
S3_REGION="auto"
S3_BUCKET="${R2_BUCKET}"
S3_ACCESS_KEY_ID="${R2_ACCESS_KEY_ID}"
S3_SECRET_ACCESS_KEY="${R2_SECRET_ACCESS_KEY}"
S3_PUBLIC_URL_PREFIX="${R2_PUBLIC_URL_PREFIX}"
